(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[446],{5855:function(f,b,a){"use strict";a.r(b),a.d(b,{"__N_SSP":function(){return C},default:function(){return e}});var g=a(4441),h=a(6503),i=a(3826),j=a(4092),k=a(1402),l=a(648),m=a(3846),n=a(2337),c=a(4755),o=function(h,a){var c=h.widgetState,b=h.config;if((0,j.eX)(a)){var o=(0,j.yD)(a),d=c.clone();return d.selectPaymentMethod(o,a.params.category),n.W.syncState(d),{config:b,widgetState:d}}if((0,j.fx)(a))return{widgetState:c,config:(0,k.Io)(a.params.target,(0,j.Wu)(a),b)};if((0,j.y2)(a)){var e=c.clone();return e.setInstallmentPlan(a.params.target),n.W.syncState(e),{config:b,widgetState:e}}if((0,j.RW)(a))return{widgetState:c,config:(0,k.Z9)((0,j.v8)(a),b)};if((0,j.Em)(a))return{widgetState:c,config:(0,k.BO)(a.params.target,b)};if((0,j.jI)(a)){var f=c.clone();return f.setUseCardPoint(a.params.target),n.W.syncState(f),{config:b,widgetState:f}}if((0,j.pY)(a)){var i=c.clone();return i.setRefundAccount(a.params.target),{config:b,widgetState:i}}if((0,j.Lb)(a)){var p=b.findAllSectionIds(),r=j.CE.resolveGroup(a.params.target).ids,q=p.reduce(function(a,b){return(0,k.Io)(b,null!=r.find(function(a){return a===b}),a)},b);return{widgetState:c,config:q}}if((0,j.kX)(a))return n.W.requestBrandpayEvent(),{widgetState:c,config:b};if((0,j.sW)(a)){var g=c.clone();return g.setAmountValue(a.params.target),n.W.syncState(g),{config:b,widgetState:g}}if((0,j.Zf)(a)){var l=a.params.target,m=c.clone();return null!=l&&(m.error=l),{config:b,widgetState:m}}return{widgetState:c,config:b}};function p(){return"undefined"==typeof window&&"undefined"!=typeof global}var q=(0,a(9352).C5)()?c.useLayoutEffect:c.useEffect;function r(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function s(a){return"WALLET__APPLEPAY"!==a.id}function t(a){return"WALLET__SAMSUNGPAY"!==a.id}function u(a){return"SHOW_MORE__PAYMENT_METHODS"===a.id}var d=a(3413),v=a.n(d),w=a(8639);function x(b){var a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:Error();if(!b){if("string"==typeof a)throw Error(a);throw a}}function y(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function z(a,b){(0,c.useEffect)(function(){return n.W.on(a,b),function(){n.W.clear(a,b)}},[a,b])}function A(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(a){return(0,g.BX)(g.HY,{children:[(0,g.tZ)(h.Global,{styles:[(0,h.css)("html,body{overflow:hidden;}")]}),(0,g.tZ)(i.UV,{children:(0,g.tZ)(i.BO,{component:"section",params:{title:"\uACB0\uC81C\uC218\uB2E8"},children:(0,g.tZ)(B,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){A(d,a,c[a])})}return d}({},a))})})]})}function B(a){var E,F,G,W,X,b,H,I,J,K,L,M,N,h,O,Y=a.rawScreenConfig,Z=a.availablePaymentMethods,$=a.amount,_=a.installment,aa=a.virtualAccount,ab=(E=Y,G=(F=(0,c.useState)(E))[0],W=F[1],X=(0,i.Tx)(),q(function(){var a,c,b,d,e,f=new j.Xf(G),g=f.findSectionById(j.VD["\uACB0\uC81C\uC218\uB2E8"]);if(null!=g){g.components=(a=g.components,c=a.filter(function(a){return a.visible&&!u(a)}).length,"ios"!==(!p()&&(null!==window.navigator.userAgent.match(/ipad|iphone/i)?"ios":null!==window.navigator.userAgent.match(/Android/i)?"android":"web"))||(a=a.filter(t)),!p()&&null!=window.ApplePaySession||(a=a.filter(s)),b=a.filter(function(a){return!u(a)}).map(function(c){var b,a;return b=function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){r(d,a,c[a])})}return d}({},c),a=(a={visible:!0},a),Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(a)):(function(b,d){var a=Object.keys(b);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(b);a.push.apply(a,c)}return a})(Object(a)).forEach(function(c){Object.defineProperty(b,c,Object.getOwnPropertyDescriptor(a,c))}),b}),d=a.find(u),null!=d&&b.length>c&&(b.splice(c,0,d),b.forEach(function(a,b){b>c&&(a.visible=!1)})),b),W(f),X.background({params:{payment_methods:null===(e=f.getVisiblePaymentMethodComponents())|| void 0===e?void 0:e.map(function(a){return a.id})},event:"payment_methods__rendered"})}},[]),{screenConfig:G}),ac=ab.screenConfig,ad=(H=(b={amount:$,availablePaymentMethods:Z,installment:_,virtualAccount:aa}).amount,I=b.availablePaymentMethods,J=b.installment,K=b.virtualAccount,L=(0,c.useMemo)(function(){var a=Object.entries(I);return new Map(a)},[I]),{widgetState:(0,c.useMemo)(function(){var a=j.KR.ofPaymentMethodMap(L),b=H.value,c=H.currency,d=H.country;return a.setAmountValue(b),a.setAmountInfo(c,d),null!=J.defaultInstallmentPlan&&a.setDefaultInstallmentPlan(J.defaultInstallmentPlan),a.setDepositDeadline(K.depositDeadline),a},[H,L,J.defaultInstallmentPlan,K.depositDeadline])}),ae=ad.widgetState;(0,m.y)(n.W.requestResize);var af,ag,ah,ai,aj,ak,al,am,an,P,Q,A,R,ao,ap,B,S,C,T,U,V,D=(M={widgetState:ae,config:new j.Xf(ac)},h=(N=(0,c.useReducer)(o,M))[0],O=N[1],{config:h.config,widgetState:h.widgetState,actionDispatcher:{dispatch:O}}),d=D.config,e=D.widgetState,f=D.actionDispatcher;return af=d,ag=f,ah=e,ai=(0,k.jw)().save,(0,l.Z)(function(){var a;(a=v().mark(function a(){var b,c,d,e;return v().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return x(c=null!==(b=af.findBrandpayMethodComponent())&& void 0!==b?b:af.findDefaultPaymentMethodComponent(),"\uACB0\uC81C \uAC00\uB2A5\uD55C \uCEF4\uD3EC\uB10C\uD2B8\uAC00 \uC874\uC7AC\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4."),aj(c),al(c),a.next=7,n.W.requestPreviousPaymentMethodId();case 7:if(d=a.sent,!(0,w.mD)(d)){a.next=10;break}return a.abrupt("return");case 10:if(null!=(e=af.findComponentById(d))){a.next=13;break}return a.abrupt("return");case 13:am(e);case 14:case"end":return a.stop()}},a)}),function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){y(g,e,f,d,h,"next",a)}function h(a){y(g,e,f,d,h,"throw",a)}d(void 0)})})()}),aj=function(a){if("BRANDPAY"===a.id){ai("BRANDPAY"),al(a);return}ai("PAYMENT_WIDGET");var b=af.findComponentById("PAYMENT_WIDGET");null!=b&&al(b)},ak=function(a){if("BlockButtonTypeB"===a.__type||"Select.Option"===a.__type){ag.dispatch({__type:"OPEN_SECTION",params:{target:"CARD_PAYMENT_DETAIL"}}),ah.selectPaymentMethod(a.id,"CARD_PAYMENT_DETAIL");return}ah.selectPaymentMethod(a.id,"PAYMENT_METHOD")},al=function(b){var a;null===(a=b.actions)|| void 0===a||a.forEach(ag.dispatch)},am=function(a){aj(a),ak(a),al(a)},an=d,P=f,Q=e,R=(0,k.jw)().data,ao=null===(A=Q.selectedPaymentMethod)|| void 0===A?void 0:A.id,ap=(0,c.useCallback)(function(b){var a;null===(a=b.actions)|| void 0===a||a.forEach(P.dispatch)},[P.dispatch]),(0,c.useEffect)(function(){if("PAYMENT_WIDGET"===R){var a=null!=ao&&"BRANDPAY"!==ao?an.findComponentById(ao):null,c=an.findDefaultPaymentWidgetMethodComponent(),b=null!=a?a:c;x(b,"\uACB0\uC81C \uAC00\uB2A5\uD55C \uCEF4\uD3EC\uB10C\uD2B8\uAC00 \uC874\uC7AC\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4."),ap(b)}},[R]),B=e,S=d,C=f,T=(0,c.useCallback)(function(a){C.dispatch({__type:"UPDATE_AMOUNT",params:{target:a.amount.value}})},[C]),U=(0,c.useCallback)(function(){var a=new j.sX(B.clone(),S).validate();return C.dispatch({__type:"SET_WIDGET_STATE_ERROR",params:{target:a.error}}),a.isValid},[C,S,B]),V=(0,c.useCallback)(function(){var a=B.refundAccount,b=a.bankId,c=a.accountNumber,d=a.holderName,e=B.depositDeadline;return null!=b&&null!=c&&null!=d?{refundAccount:{bankId:b,accountNumber:c,holderName:d},depositDeadline:e}:{depositDeadline:e}},[B]),z(j.GM.UPDATE_AMOUNT,T),z(j.GM.VALIDATE_REQUEST_PAYMENT,U),z(j.GM.REQUEST_VIRTUAL_ACCOUNT_INFO,V),(0,l.Z)(function(){n.W.initialize(function(){n.W.mount(JSON.stringify(d.getMetadata()))})}),(0,g.tZ)(k.Pu,{widgetState:e,config:d,actionDispatcher:f})}e.path="/payment-methods";var C=!0},2337:function(i,c,a){"use strict";a.d(c,{W:function(){return o}});var d=a(3413),e=a.n(d),j=a(6590),k=a(7875),f=a(240),l=a(9352);function m(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}var g,h,b=new f.gP({receiverIntializeMessage:"TossPayments.PaymentWidget:initialize:sdk",senderInitializeMessage:"TossPayments.PaymentWidget:initialize:payment-methods"}),n=(h=(g=e().mark(function a(c,d,g){return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.postMessage(c,d,g);case 3:return a.abrupt("return",a.sent);case 6:if(a.prev=6,a.t0=a.catch(0),!((0,f.q4)(a.t0)&&k.fN)){a.next=10;break}throw new j.zP("Bridge \uC751\uB2F5\uC744 \uBC1B\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");case 10:throw a.t0;case 11:case"end":return a.stop()}},a,null,[[0,6]])}),function(){var a=this,b=arguments;return new Promise(function(d,e){var f=g.apply(a,b);function c(a){m(f,d,e,c,h,"next",a)}function h(a){m(f,d,e,c,h,"throw",a)}c(void 0)})}),function(a,b,c){return h.apply(this,arguments)}),o={syncState:function(a){n("SYNC_STATE",{paymentMethod:a.paymentMethod,paymentRequest:a.paymentRequest})},requestResize:function(a){n("REQUEST_RESIZE",{height:a.blockSize})},requestFallback:function(){n("FALL_BACK")},initialize:function(a){(0,l.sk)()||b.initialize(window.parent).then(function(){return a()})},mount:function(a){n("MOUNT",{metadata:a,height:document.body.offsetHeight})},requestPreviousPaymentMethodId:function(){return n("REQUEST_PREVIOUS_PAYMENT_METHOD_ID")},requestBrandpayEvent:function(){return n("OPEN_BRANDPAY_SETTINGS")},on:b.on,clear:b.off}},6926:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment-methods",function(){return c(5855)}])}},function(a){a.O(0,[772,480,424,741,562,774,888,179],function(){var b;return a(a.s=6926)}),_N_E=a.O()}])